---
title: "用户管理系统"
date: 2019-01-01T11:02:05+06:00
type: "post"
weight: 3
---

我们的用户管理系统默认是根据{{< hl-text red >}}__用户管理__{{< /hl-text >}}表来对用户进行管理的。您可以参考以下sql语句建立**\_\_用户管理\_\_**表。  

{{< codeblock 创建__报表管理__表 >}}
CREATE TABLE IF NOT EXISTS __用户管理__ (
    用户名称 TEXT UNIQUE NOT NULL,
    所属部门 TEXT,
    密码 VARCHAR(40, 40) NOT NULL,
    注册时间 DATETIME DEFAULT (DATETIME('now', 'localtime')) NOT NULL,
    最后一次登陆时间 DATETIME DEFAULT (DATETIME('now', 'localtime')) NOT NULL,
    最近一天尝试登陆次数 INT DEFAULT 0 NOT NULL,
    是否准入 INT DEFAULT 0 NOT NULL,
    用户说明 TEXT
);
{{< /codeblock >}}
<br>
在**\_\_用户管理\_\_**表中，您至少需要创建以下几个字段：**用户名称**、**密码**、**注册时间**，**最后一次登陆时间**，**最近一天尝试登陆次数**，**是否准入**，其它字段则可以根据实际需求创建或删除。  

{{< image classes="clear fancybox fig-100" src="/image/管理员手册/用户管理.png" >}}
<br>
{{< hl-text green >}}用户名称{{< /hl-text >}}即用户登陆报表平台时使用的名称。这个值必须是唯一的，因为这个字段是我们用以区分用户ID的唯一标志。  
  
{{< hl-text green >}}密码{{< /hl-text >}}即用户登陆报表平台时使用的密码。这个值是以哈希的方式存储的，手动修改将导致用户无法正常登陆，只能通过报表平台的{{< hl-text yellow >}}注册&改密{{< /hl-text >}}入口进行修改。如果用户忘记自己的密码，无法改密，则可以删除该密码，使用户以空密码的形式登陆，然后再进行改密。或者也可以删除这条用户记录，让用户重新注册。  
  
{{< hl-text green >}}注册时间{{< /hl-text >}}即用户注册账号的时间。您可以通过这个字段排序，快速筛选出新注册的用户。
  
{{< hl-text green >}}最后一次登陆时间{{< /hl-text >}}即用户最后一次成功登陆的时间。这个值会随着用户成功登陆而自动更新，同时这个值也是报表平台赖以判断**最近一天尝试登陆次数**的重要依据。  
  
{{< hl-text green >}}最近一天尝试登陆次数{{< /hl-text >}}即用户最后一次连续登录失败的次数。如果用户在一天内登陆失败的次数超出了{{< hl-text yellow >}}最大可尝试登陆次数{{< /hl-text >}}，则该账号将被视为异常账号锁定。被锁定的账号将在下个日期首次登陆时自动解锁，同时如果用户登陆成功，则改值会被自动清零。  
  
{{< hl-text green >}}是否准入{{< /hl-text >}}即是否允许用户登陆报表平台。新注册的用户这个值是0，您需要手动将这个值修改为1，才能允许用户正常登陆。您也可以将特定用户的值修改为0，以锁定该用户。  
  
**\_\_用户管理\_\_**表中的其它字段您可以根据实际需求创建，您创建的任何字段都可以作为用户身份信息来管理用户的权限。比如我们创建一个{{< hl-text green >}}所属部门{{< /hl-text >}}字段用以表示用户所在的部门，则在之后的权限管理系统中，我们就可以限制用户只能访问自己所在部门的数据。  
  
> 实际上，您不需要时常维护**\_\_用户管理\_\_**表，只需要在新用户注册之后，完善其身份信息，并在**是否准入**中授予其登陆报表平台的权限。其它用户相关的事项则可以由报表平台自动完成。

